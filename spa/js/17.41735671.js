(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"013f":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"row justify-center items-center",attrs:{id:"login"}},[n("div",{staticClass:"column q-pa-lg",staticStyle:{"padding-top":"70px"}},[n("div",{staticClass:"row"},[n("q-card",{staticStyle:{width:"300px",height:"380px"},attrs:{square:""}},[n("q-card-section",{staticClass:"bg-brand text-center"},[n("h4",{staticClass:"text-h5 text-white"},[t._v("登入")])]),n("q-card-section",[n("q-form",{staticClass:"q-px-sm",on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)},reset:t.reset}},[n("q-input",{attrs:{square:"",clearable:"",label:"請輸入帳號",rules:[function(e){return t.$v.form.account.required||"請輸入帳號"},function(e){return t.$v.form.account.minLength||"最少 4 個字元"},function(e){return t.$v.form.account.maxLength||"最多 16 個字元"}]},on:{input:function(e){return t.$v.form.account.$touch()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"person"}})]},proxy:!0}]),model:{value:t.form.account,callback:function(e){t.$set(t.form,"account","string"===typeof e?e.trim():e)},expression:"form.account"}}),n("q-input",{attrs:{square:"",clearable:"",type:t.form.isPwd?"password":"text",label:"請輸入密碼",rules:[function(e){return t.$v.form.password.required||"請輸入密碼"},function(e){return t.$v.form.password.minLength||"最少 4 個字元"},function(e){return t.$v.form.password.maxLength||"最多 16 個字元"}]},on:{input:function(e){return t.$v.form.password.$touch()}},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"lock"}})]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.form.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.form.isPwd=!t.form.isPwd}}})]},proxy:!0}]),model:{value:t.form.password,callback:function(e){t.$set(t.form,"password","string"===typeof e?e.trim():e)},expression:"form.password"}}),n("div",{staticClass:"q-pt-lg"},[n("q-btn",{staticClass:"full-width bg-brand text-white",attrs:{unelevated:"",size:"lg",label:"送出",type:"submit"}})],1)],1)],1),n("q-card-section",{staticClass:"text-center q-pa-sm"},[n("router-link",{staticClass:"text-grey-5",attrs:{to:"/register"}},[t._v("沒有帳號？ 點我註冊")])],1)],1)],1)])])},s=[],o=n("c973"),a=n.n(o),i=(n("96cf"),n("b5ae")),c={name:"PageLogin",data:function(){return{form:{account:"",password:"",isPwd:!0}}},validations:{form:{account:{required:i["required"],minLength:Object(i["minLength"])(4),maxLength:Object(i["maxLength"])(16)},password:{required:i["required"],minLength:Object(i["minLength"])(4),maxLength:Object(i["maxLength"])(16)}}},methods:{reset:function(){this.form.account="",this.form.password=""},submit:function(){var t=this;return a()(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post("/users/login",t.form);case 3:n=e.sent,r=n.data,t.$q.notify({message:"登入成功",timeout:1e3,type:"positive",color:"faded",textColor:"white",position:"top"}),t.$store.commit("user/login",r),t.$router.push("/"),t.$store.dispatch("user/addGuestCart").then((function(t){})).catch((function(t){console.log(t)})),t.user.isAdmin&&t.$router.push("/admin/products"),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),t.$q.notify({message:e.t0.response.data.message,timeout:1e3,type:"negative",color:"faded",textColor:"white",position:"top"});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()}}},u=c,l=n("2877"),p=n("9989"),f=n("f09f"),m=n("a370"),d=n("0378"),h=n("27f9"),g=n("0016"),w=n("9c40"),v=n("eebe"),x=n.n(v),b=Object(l["a"])(u,r,s,!1,null,null,null);e["default"]=b.exports;x()(b,"components",{QPage:p["a"],QCard:f["a"],QCardSection:m["a"],QForm:d["a"],QInput:h["a"],QIcon:g["a"],QBtn:w["a"]})}}]);