(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{ed2a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"q-pa-lg",attrs:{id:"singleorders"}},[a("div",{staticClass:"container"},[a("h5",{staticClass:"text-bold text-grey-9 q-mb-md"},[e._v("訂單管理")]),a("q-table",{attrs:{data:e.table.data,columns:e.table.columns,"row-key":"name","rows-per-page-options":[0],pagination:e.table.pagination,"hide-bottom":"",flat:"",bordered:""},on:{"update:pagination":function(t){return e.$set(e.table,"pagination",t)}},scopedSlots:e._u([{key:"body-cell-image1",fn:function(e){return[a("q-td",{attrs:{props:e}},[a("q-avatar",{attrs:{size:"80px"}},[a("img",{attrs:{src:e.row.image1}})])],1)]}},{key:"body-cell-name",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("router-link",{staticClass:"order-link",attrs:{to:"/product/"+t.row.product}},[e._v(e._s(t.row.name))])],1)]}},{key:"body-cell-totalprice",fn:function(t){return[a("q-td",{attrs:{props:t}},[e._v("\n          "+e._s(t.row.price*t.row.amount)+"\n        ")])]}}])}),a("div",{staticClass:"sum flex justify-end q-pa-md"},[a("div",[a("span",[e._v("運費："+e._s(e.delivery)+" 元 ")]),a("span",[e._v("總額："+e._s(e.sum+e.delivery)+" 元")])])])],1)])},r=[],i=a("f437"),o=i["a"],s=a("2877"),l=a("9989"),d=a("eaac"),c=a("db86"),u=a("cb32"),p=a("eebe"),m=a.n(p),f=Object(s["a"])(o,n,r,!1,null,null,null);t["default"]=f.exports;m()(f,"components",{QPage:l["a"],QTable:d["a"],QTd:c["a"],QAvatar:u["a"]})},f437:function(e,t,a){"use strict";(function(e){var n=a("ded3"),r=a.n(n),i=a("c973"),o=a.n(i);a("96cf"),a("13d5"),a("d81d"),a("99af");t["a"]={name:"PageSingleOrders",data:function(){return{delivery:0,table:{columns:[{name:"image1",field:"image1",align:"center",label:"商品明細",style:"width: 100px"},{name:"name",field:"name",align:"left",style:"width: 100px"},{name:"amount",field:"amount",align:"center",label:"數量",style:"width: 200px"},{name:"price",field:"price",align:"center",label:"單價",style:"width: 200px"},{name:"totalprice",field:"totalprice",align:"center",label:"小計",style:"width: 200px"}],pagination:{sortBy:"date",descending:!0,page:1,rowsPerPage:0},data:[]}}},computed:{sum:function(){return 0===this.table.data.length?0:this.table.data.reduce((function(e,t){return e+t.amount*t.price}),0)}},mounted:function(){var t=this;return o()(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$axios.get("/orders/"+t.$route.params.id,{headers:{authorization:"Bearer "+t.$store.state.user.jwt.token}});case 3:n=a.sent,i=n.data,t.delivery=i.result.delivery,t.table.data=i.result.products.map((function(t){return t=r()(r()({},t.product),{},{product:t.product._id,amount:t.amount,_id:t._id}),t.image1="".concat(e.env.API_URL,"/files/").concat(t.image1),t})),console.log(t.table.data),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0),t.$q.notify({message:"取得訂單失敗",timeout:1e3,type:"negative",color:"faded",textColor:"white",position:"top"});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})))()}}}).call(this,a("4362"))}}]);